<!-- fragmento JS a integrar en tu index.html pública -->
<script>
  // NO pongas aquí el token en texto plano
  // El usuario copia/pega el token solo en el móvil y lo guarda con esta UI

  // Guardar token en localStorage del navegador (ejecutar solo en el móvil autorizado)
  async function setTokenFromPrompt() {
    const tk = prompt("Pega aquí el token seguro que generaste (solo en tu celular):");
    if (tk && tk.length > 10) {
      localStorage.setItem("RC_TOKEN", tk);
      alert("Token guardado en este dispositivo.");
    } else {
      alert("Token inválido.");
    }
  }

  async function enviarComando() {
    const token = localStorage.getItem("RC_TOKEN");
    if (!token) { alert("No hay token en este dispositivo. Pulsa 'Registrar token' en tu móvil."); return; }
    const texto = document.getElementById("texto").value.trim();
    const SERVER = "https://unrehabilitated-divaricatingly-aileen.ngrok-free.dev"; // tu URL pública de ngrok
    try {
      const r = await fetch(SERVER + "/mensaje", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ texto: texto, token: token })
      });
      const j = await r.json();
      alert("Respuesta: " + (j.msg || JSON.stringify(j)));
    } catch (e) { alert("Error de conexión: " + e); }
  }
</script>

<!-- botones en HTML -->
<button onclick="setTokenFromPrompt()">Registrar token (solo en mi celular)</button>
<input id="texto" type="text" placeholder="comando"/>
<button onclick="enviarComando()">Enviar</button>
